// BAML file for generating portfolio chat modals (Adam chat assistant)

enum AdamModalType {
  Resume
  Experience
  Project
  Education
  Summary
}

class AdamModal {
  id string @description("Unique identifier for the modal")
  type AdamModalType @description("Type of modal to display")
  title string @description("Title/headline for the modal card")
  body string[] @description("Array of description paragraphs or bullet points")
  images string[] | null @description("Optional array of image URLs to display")
  linkHref string | null @description("Optional link URL (e.g., for resume PDF)")
  linkLabel string | null @description("Optional label for the link button")
  sourceIds string[] | null @description("Optional IDs of source data items")
}

class AdamResponse {
  modals AdamModal[] @description("Array of 1-4 modal cards to display, ordered by relevance")
}

function GenerateAdamModals(
  user_message: string,
  experiences_context: string,
  projects_context: string
) -> AdamResponse {
  client GEMINI_PRO_2_5

  prompt #"
    You are Adam, an AI assistant for Adán Flores' portfolio website. Your role is to help visitors learn about Adán's professional experience, projects, skills, and background.

    USER REQUEST:
    {{ user_message }}

    AVAILABLE DATA:

    EXPERIENCES:
    {{ experiences_context }}

    PROJECTS:
    {{ projects_context }}

    INSTRUCTIONS:
    1. Analyze the user's request and identify the most relevant experiences and/or projects
    2. Generate 2-4 modal cards that best answer their query (aim for 3-4 when possible)
    3. ALWAYS include a resume modal as one of the cards (type: "resume")
    4. For experience/project modals:
       - Use the actual data from the context above
       - Extract the id, title/role, description
       - Include image URLs if available in the data
       - Create concise, engaging descriptions (2-4 bullet points max)
    5. Order modals by relevance to the user's query
    6. If the query is vague, include a summary modal explaining how Adán matches their needs

    RESUME MODAL FORMAT:
    {
      "id": "resume",
      "type": "Resume",
      "title": "Download Resume (PDF)",
      "body": ["Complete professional resume with all experience, education, and skills. Tailored for {{ user_message }}."],
      "linkHref": "/Adan_Flores_resume.pdf",
      "linkLabel": "Download Resume",
      "images": null,
      "sourceIds": null
    }

    EXPERIENCE MODAL EXAMPLE:
    {
      "id": "experience-google",
      "type": "Experience",
      "title": "Software Engineer Intern — Google",
      "body": [
        "Cloud AI & Industry Solutions team, Sunnyvale CA",
        "Developed core C++ components for distributed data processing pipeline",
        "Optimized resource consumption and implemented SQL-based testing"
      ],
      "images": ["/images/experiences/google-1.jpeg"],
      "linkHref": null,
      "linkLabel": null,
      "sourceIds": ["google"]
    }

    PROJECT MODAL EXAMPLE:
    {
      "id": "project-frida",
      "type": "Project",
      "title": "FRIDA - Service Robot for RoboCup",
      "body": [
        "Autonomous service robot with environment awareness and human-robot interaction",
        "Led behavior integration with Docker CI/CD and ROS nodes",
        "Implemented object detection with YoloV8 and robotic arm manipulation with MoveIt"
      ],
      "images": ["/images/projects/frida-1.jpeg"],
      "linkHref": null,
      "linkLabel": null,
      "sourceIds": ["frida"]
    }

    IMPORTANT:
    - Keep descriptions concise and impactful
    - Use actual data from the provided context
    - Match the tone: professional yet approachable
    - Prioritize the most relevant items for the user's query
    - Always use real image paths from the data when available

    {{ ctx.output_format }}
  "#
}
